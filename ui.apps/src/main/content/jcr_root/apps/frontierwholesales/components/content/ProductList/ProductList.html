<sly
    data-sly-use.clientLib="${'/libs/granite/sightly/templates/clientlib.html'}"/>
<sly data-sly-call="${clientlib.js @ categories='productlist'}" data-sly-unwrap/>
<sly data-sly-use.user="${'com.frontierwholesales.core.models.SessionModel'}"></sly>
<input id="categoryId" type=hidden value="${request.requestParameterMap['id'][0].toString}">
<sly data-sly-use.url="../../global-useapi/serverurl.js"></sly>
<script>
  var serverURL = "${url.server @ context='html'}";
</script>
<article class="product-list-page">
    <div class="container">
    <div id="productlisttemplate"></div>
                        <script id="productlistTemplate" type="text/x-handlebars-template" >
                       <section id="breadcrumbs">
                            <div class="container">
                                 <ol class="breadcrumb">
                                 <li><a href="/content/frontierwholesales/en/home.html">Home</a></li>
                                     {{#each categorylist.parent}}
                                        {{#unless @first}}
										 {{#if @last}}
                                            <li class="active">{{name}}</li>
                                            {{else}}
                                            <li><a href="/content/frontierwholesales/en/productlist.html?id={{id}}">{{name}}</a></li>
                                        {{/if}}
                                     {{/unless}}
										{{/each}}
                                 </ol>
                            </div>
                       </section>           


<aside id="plp-search-left-nav-filters">
    {{#if categorylist.children.length}}
<div class="each-filter-section categories">
                                     <h2 class="filter-heading">Categories</h2>
                                   <ul class="each-filters-list">
                                   {{#each categorylist.children as |child|}}

                                        {{#moreCategories @index}}
                                            <li class="filter-item visuallyhidden">
                                             <a href="/content/frontierwholesales/en/productlist.html?id={{child.id}}" class="filter-link"><span class="text">{{child.name}}</span></a>
                                            </li>
										{{else}}
                                        <li class="filter-item">
                                             <a href="/content/frontierwholesales/en/productlist.html?id={{child.id}}" class="filter-link"><span class="text">{{child.name}}</span></a>
                                        </li>
                                       {{/moreCategories}}
									{{/each}}
                                    {{#viewMore categorylist.children.length}}
                                            <li class="filter-item filter-item-expand">
                                             <button type="button" class="btn btn-view-more-filters">
                                                  <span class="view-more-text">View More</span>
                                             </button>
                                        </li>

                                       {{/viewMore}}
                                   </ul>
                                
                              </div>
                        {{/if}}
                                {{#if categorylist.filters.filters.length}}
                                {{#each categorylist.filters.filters}}
                                    {{#if filter_values}}
                                    {{#noCatFilter this.filter_name}}
                                       
                                    <div class="each-filter-section {{../filter_name}}">
                                       <h2 class="filter-heading">{{../filter_name}}</h2>
                                       
                                       <ul data-code="{{../filter_code}}" class="each-filters-list">
                                           {{#each ../filter_values as |child|}}
                                            {{#moreCategories @index}}
                                            <li class="filter-item visuallyhidden">
                                                 <a href="#" id="{{../../filter_code}}{{@index}}" data-value="{{child.value}}" class="filter-link checkbox-link"><span class="text">{{{child.name}}}</span></a>
                                            </li>
                                           {{else}}
                                            <li class="filter-item">
                                                 <a href="#"  id="{{../../filter_code}}{{@index}}" data-value="{{child.value}}" class="filter-link checkbox-link"><span class="text">{{{child.name}}}</span></a>
                                            </li>
                                            {{/moreCategories}}


                                           {{/each}}
                                            {{#viewMore filter_values.length}}
                                            <li class="filter-item filter-item-expand">
                                                 <button type="button" class="btn btn-view-more-filters">
                                                      <span class="view-more-text">View More</span>
                                                 </button>
                                            </li>
                                           {{/viewMore}}
                                       </ul>

                                  </div>
                                  {{/noCatFilter}}
                                    {{/if}}
                                {{/each}}
                                {{/if}}
                             

                         </aside>

                       
                        <section id="plp-search-product-grid">
                             

                               
                              <div id="plp-search-header-holder" class="search-header-holder">
                                  
                                 <input type="hidden" id="totalcount" value="{{total_count}}">
                                   <div id="search-heading">
                                        <h1 class="plp-search-text-heading">{{categorylist.category.name}}</h1>
                                        <span class="showing-number-of-items">
                                             Showing <span class="number">{{recordsPerPage recsPerPage search_criteria.current_page total_count}}</span> of <span class="number">{{total_count}}</span> Products
                                        </span>
                                   </div>
                              {{#if total_count includedZero=false}}
                                   <div id="search-sort-items">
                                        <div id="filters-holder">
                                             <div class="form-group">
                                                  <label for="sortby-type">Filters</label>
                                                  <button type="button" class="btn btn-black btn-filters-plp-search">View Options</button>
                                             </div>
                                        </div>
                                        <div class="sort-by-holder">
                                             <div class="form-group">
                                                  <label for="sortby-type">Sort By</label>
                                                  <select id="sortBy" name="sortby-type" class="form-control">
                                                       <option value="featured">Featured</option>
                                                       <option value="newproduct">New Arrivals</option>
                                                       <option value="asc">Lowest Price</option>
                                                       <option value="desc">Highest Price</option>
                                                  </select>
                                             </div>
                                        </div>
                                       {{#gt total_count}}
                                        <div class="items-per-page-holder">
                                             <div class="form-group">
                                                  <label for="sortby-items">Items Per Page:</label>
                                                  <select id="itemPerPageSelect" name="sortby-items"  class="form-control">
                                                       <option value="28">28</option>
                                                       <option value="56">56</option>
                                                       <option value="100">100</option>
                                                  </select>
                                             </div>
                                        </div>
                                       {{/gt}}
                                   </div>
                                  {{/if}}
                              </div>

                            
                             
                                <div id="product-grid" class="match-height">
                                  {{#items}}
                                   <div class="product-grid-item" >
                                       
                                        {{#ifEquals new_product}}
                                            <span class="badge badge-new">New</span>
                                        {{/ifEquals}}
                                        {{#ifEquals on_sale}}
                                            <span class="badge badge-sale">Sale</span>
                                        {{/ifEquals}}
                                        {{#ifEquals close_out}}
                                            <span class="badge badge-closeout">Closeout</span>
                                        {{/ifEquals}}
                                        <a href="/content/frontierwholesales/en/productdetail.html?sku={{sku}}" class="grid-item-link">
                                             <span class="grid-image-holder">
                                            
                                              <img src="{{imgPath}}" alt="Product Name">
                                                  
                                             </span>
                                             <span class="grid-item-number">
                                                  Item # <span class="number">{{sku}}</span>
                                             </span>
                                             <span class="grid-product-name">
                                                  {{name}}
                                             </span>
                                            {{#if ${user.authToken != null @context='scriptString' }}} 
                                            <span class="grid-product-price">
                                                  <!--<span class="product-sale-price">$5.80</span> -->
                                                  <!--<span class="product-now-price">Now {{ formattedPrice}}</span>-->
                                                
                                                {{#if special_price includeZero=false}}
                                                   <span class="product-sale-price">{{ formatNumber tierprice style="currency" currency="USD"}}</span> 
                                                   <span class="product-now-price">Now {{formatNumber special_price style="currency" currency="USD"}}</span>
                                                {{else}}
                                                    {{#priceCheck tierprice}}
                                                        <span class="product-sale-price normal-price">{{ formatNumber ../tierprice style="currency" currency="USD"}}</span>
                                                    {{/priceCheck}}
                                                {{/if}}
                                             </span>
                                            {{/if}}
                                        </a>
                                       <!-- Magento attributes TBD -->
                                       <!--<div class="grid-alert">
                                             <div class="alert alert-danger" role="alert"> 
                                                  <span class="glyphicon glyphicon-exclamation-sign"></span>
                                                  <strong>Restricted Shipping</strong>
                                             </div>
                                        </div>-->
                                        {{#ifEquals bulk}}
                                       <div class="grid-alert">
                                             <div class="alert alert-bulk" role="alert">
                                                  <span class="glyphicon glyphicon-info-sign"></span>
                                                  <strong>Buy 5 to save 5%:</strong>
                                             </div>
                                        </div>
                                       {{/ifEquals}}
                                        {{#if ${user.authToken != null @context='scriptString' }}}
                                        {{#priceCheck tierprice}}
                                       <div class="grid-add-to-cart">
                                             <div class="qty-holder">
                                                  <button type="button" class="decrease qty-button qty-down">
                                                       <span class="decrease-minus">-</span>
                                                       <span class="visuallyhidden">decrease</span>
                                                  </button>
                                                  <input type="text" min="1" max="99" maxlength="2" name="quantity" class="grid-product-qty-input qty-input-field" value="1">
                                                  <button type="button" class="increase qty-button qty-up">
                                                       <span class="increase-plus">+</span>
                                                       <span class="visuallyhidden">increase</span>
                                                  </button>
                                             </div>
                                           <div id="cartMessage-{{sku}}" class="alert alert-add-to-cart" style="display: none;">Added to your Cart!</div>
                                             <button id="{{sku}}"type="button" class="btn btn-light-green btn-grid-add-to-cart">Add to Cart</button>
                                        </div>
                                       
                                       <div class="product-wishlist">
                                            <div id="message-{{sku}}" class="alert alert-add-to-cart" style="display: none;">Item added to your WishList!</div>
                                             <button data-skuid="{{sku}}" class="btn btn-add-wishlist btn-wishlist">Add to Wishlist +</button>
                                             <div class="add-to-shelf btn">
                                                  <select data-prodid="{{id}}" data-wishsku="{{sku}}" class="requisition-list-select">
                                                       <option>Add to Shelves +</option>
                                                      
                                                  </select>
                                             </div>
                                        </div>
                                       {{/priceCheck}}
                                 {{/if}}
                                        </div>
                                        {{/items}}
                                       

                                 </div>

                                  

                             
                             {{#if pageTotal includedZero=false}}
                              <div id="search-pagination">
                                   
                                   <nav aria-label="Page navigation">
                                        <ul class="pagination">
                                             <li>
                                                  <a href="#" class="pagination-previous pagination-arrow disabled" id="previous" aria-label="Previous">
                                                       <span class="glyphicon glyphicon-triangle-left"></span>
                                                  </a>
                                             </li>
                                             <li class="pagination-numbers">
                                               
                                                
                                                  <span class="pag-number">{{search_criteria.current_page}} of {{pageTotal}}</span>
                                                
                                                 
                                             </li>
                                             <li><input id="currentPage" type=hidden value="{{search_criteria.current_page}}">
                                                 <input id="totalPage" type=hidden value="{{pageTotal}}">
                                                  <a href="#" class="pagination-next pagination-arrow" id="next" aria-label="Next">
                                                       <span class="glyphicon glyphicon-triangle-right"></span>
                                                  </a>
                                             </li>
                                        </ul>
                                   </nav>
                                 
                              </div>
                             {{/if}}
                            </script>
							</section>
                         
                    </div>
               </article>