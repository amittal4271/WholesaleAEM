<sly
    data-sly-use.clientLib="${'/libs/granite/sightly/templates/clientlib.html'}"/>
<sly data-sly-call="${clientlib.js @ categories='productlist'}" data-sly-unwrap/>
<input id="categoryId" type=hidden value="${request.requestParameterMap['id'][0].toString}">
<article class="product-list-page">
                    <div class="container">
                         <aside id="plp-search-left-nav-filters">
                            <sly data-sly-use.categories="${'com.frontierwholesales.core.magento.services.models.CategoriesModel' @ id=request.requestParameterMap['id'][0].toString}"></sly>  
                              <sly data-sly-test="${categories.categories.children_data}">
                                <div class="each-filter-section categories">
                                     
                                   <h2 class="filter-heading">Categories</h2>
                                   <ul class="each-filters-list">
                                       <sly data-sly-list.child="${categories.categories.children_data}">
                                        <li class="filter-item ${childList.count > 5?'visuallyhidden':''}">
                                             <a href="/content/frontierwholesales/en/productlist.html?id=${child.id}" class="filter-link"><span class="text">${child.name}</span></a>
                                        </li>
                                       
                                       
                                       </sly>
                                       <li class="filter-item filter-item-expand">
                                             <button type="button" class="btn btn-view-more-filters">
                                                  <span class="view-more-text">View More</span>
                                             </button>
                                        </li>
                                   </ul>
                                    
                              </div>
                                  </sly>    
                                
                             
                            
                              

                              <div class="each-filter-section brand">
                                   <h2 class="filter-heading">Brand</h2>
                                   <ul class="each-filters-list">
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link selected-filter"><span class="text">Accessories</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Seasonings</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Choice Teas</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Cusa Teas</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Earth Mama Angel Baby</span></a>
                                        </li>
                                        <!-- we only show the first 5 filters for each section -->
                                        <li class="filter-item filter-was-hidden">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Frontier</span></a>
                                        </li>
                                        <li class="filter-item filter-was-hidden">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Herbal Zap</span></a>
                                        </li>
                                        <li class="filter-item filter-was-hidden">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">Mate Factor</span></a>
                                        </li>
                                        <li class="filter-item filter-item-expand">
                                             <button type="button" class="btn btn-view-more-filters show-additional">
                                                  <span class="view-more-text">View Less</span>
                                             </button>
                                        </li>
                                   </ul>
                              </div>

                              <div class="each-filter-section brand">
                                   <h2 class="filter-heading">Price</h2>
                                   <ul class="each-filters-list">
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">$0-$25</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link selected-filter"><span class="text">$25-$50</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">$50-$75</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">$75-$100</span></a>
                                        </li>
                                        <li class="filter-item">
                                             <a href="#" class="filter-link checkbox-link"><span class="text">$100+</span></a>
                                        </li>
                                   </ul>
                              </div>

                         </aside>
                        <sly data-sly-test.user="${currentSession.userID}" />  
                        <section id="plp-search-product-grid"></section>
                             
                             <script id="productlistTemplate" type="text/x-handlebars-template"  >
                               
                              <div id="plp-search-header-holder" class="search-header-holder">
                                  
                                 
                                   <div id="search-heading">
                                        <h1 class="plp-search-text-heading">${categories.categories.name @context='scriptString' }</h1>
                                        <span class="showing-number-of-items">
                                             Showing <span class="number">{{recordsPerPage recsPerPage search_criteria.current_page total_count}}</span> of <span class="number">{{total_count}}</span> Products
                                        </span>
                                   </div>
                              {{#if total_count includedZero=false}}
                                   <div id="search-sort-items">
                                        <div id="filters-holder">
                                             <div class="form-group">
                                                  <label for="sortby-type">Filters</label>
                                                  <button type="button" class="btn btn-black btn-filters-plp-search">View Options</button>
                                             </div>
                                        </div>
                                        <div class="sort-by-holder">
                                             <div class="form-group">
                                                  <label for="sortby-type">Sort By</label>
                                                  <select id="sortBy" name="sortby-type" class="form-control">
                                                       <option value="featured">Featured</option>
                                                       <option value="newproduct">New Arrivals</option>
                                                       <option value="asc">Lowest Price</option>
                                                       <option value="desc">Highest Price</option>
                                                  </select>
                                             </div>
                                        </div>
                                       {{#gt total_count}}
                                        <div class="items-per-page-holder">
                                             <div class="form-group">
                                                  <label for="sortby-items">Items Per Page:</label>
                                                  <select id="itemPerPageSelect" name="sortby-items"  class="form-control">
                                                       <option value="28">28</option>
                                                       <option value="56">56</option>
                                                       <option value="100">100</option>
                                                  </select>
                                             </div>
                                        </div>
                                       {{/gt}}
                                   </div>
                                  {{/if}}
                              </div>

                            
                             
                                <div id="product-grid" class="match-height">
                                  {{#items}}
                                   <div class="product-grid-item" >
                                        <!--<span class="badge badge-sale">Sale</span>-->
                                        <a href="/content/frontierwholesales/en/productdetail.html?sku={{sku}}" class="grid-item-link">
                                             <span class="grid-image-holder">
                                            
                                              <img src="/content/dam/magento2/product{{imgPath}}" alt="Product Name">
                                                  
                                             </span>
                                             <span class="grid-item-number">
                                                  Item # <span class="number">{{id}}</span>
                                             </span>
                                             <span class="grid-product-name">
                                                  {{name}}
                                             </span>
                                             <span class="grid-product-price">
                                                  <!--<span class="product-sale-price">$5.80</span> -->
                                                  <span class="product-now-price">Now {{ formattedPrice}}</span>
                                             </span>
                                        </a>
                                        {{#if ${user != 'anonymous' @context='scriptString' }}}
                                       <div class="grid-add-to-cart">
                                             <div class="qty-holder">
                                                  <button type="button" class="decrease qty-button qty-down">
                                                       <span class="decrease-minus">-</span>
                                                       <span class="visuallyhidden">decrease</span>
                                                  </button>
                                                  <input type="text" min="1" max="99" maxlength="2" name="quantity" class="grid-product-qty-input qty-input-field" value="1">
                                                  <button type="button" class="increase qty-button qty-up">
                                                       <span class="increase-plus">+</span>
                                                       <span class="visuallyhidden">increase</span>
                                                  </button>
                                             </div>
                                           <div id="cartMessage-{{sku}}" class="alert alert-add-to-cart" style="display: none;">Added to your Cart!</div>
                                             <button id="{{sku}}"type="button" class="btn btn-light-green btn-grid-add-to-cart">Add to Cart</button>
                                        </div>
                                 {{/if}}
                                        </div>
                                        {{/items}}
                                       

                                 </div>

                                  

                             
                             {{#if pageTotal includedZero=false}}
                              <div id="search-pagination">
                                   
                                   <nav aria-label="Page navigation">
                                        <ul class="pagination">
                                             <li>
                                                  <a href="#" class="pagination-previous pagination-arrow disabled" id="previous" aria-label="Previous">
                                                       <span class="glyphicon glyphicon-triangle-left"></span>
                                                  </a>
                                             </li>
                                             <li class="pagination-numbers">
                                               
                                                
                                                  <span class="pag-number">{{search_criteria.current_page}} of {{pageTotal}}</span>
                                                
                                                 
                                             </li>
                                             <li><input id="currentPage" type=hidden value="{{search_criteria.current_page}}">
                                                 <input id="totalPage" type=hidden value="{{pageTotal}}">
                                                  <a href="#" class="pagination-next pagination-arrow" id="next" aria-label="Next">
                                                       <span class="glyphicon glyphicon-triangle-right"></span>
                                                  </a>
                                             </li>
                                        </ul>
                                   </nav>
                                 
                              </div>
                             {{/if}}
                            </script>

                         
                    </div>
               </article>